<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./images/icon.png" type="image/png" />
    <link rel="stylesheet" href="./normaliz.css" type="text/css">
    <link rel="stylesheet" href="./index.css" type="text/css" />
    <title>Homework-16_ex1</title>
</head>

<body>

    <button onclick="productList()">Показать список товаров</button>
    <button onclick="available()">Показать цены на все товаты</button>
    <button onclick="costOfGoods()">Узнать стоимость интересующего товара</button>
    <button onclick="possForSale()">Узнать возможное кол-во приобретаемого товара</button>

    <script>
        "use strict";

        let warehouse = [
            {
                name: 'яблоко',
                price: 3.5,
                count: 10,
            },
            {
                name: 'апельсин',
                price: 6,
                count: 14,
            },
            {
                name: 'банан',
                price: 5.1,
                count: 2,
            },
            {
                name: 'мандарин',
                price: 5.9,
                count: 9,
            },
            {
                name: 'груша',
                price: 1.3,
                count: 5,
            },
        ];

        function productList() {
            console.log(`Список товаров:`);
            for (let product of warehouse) {
                console.log(`${product.name}`);
            }
        }

        function available() {
            for (let product of warehouse) {
                console.log(`${product.name}: ${product.price}р за кг.`);
            }
        }

        function costOfGoods() {
            let pushProduct = prompt('Стоимость какого товара вас интересует?');
            let price = 0;
            for (let product of warehouse) {
                if (pushProduct == product.name) {
                    price = product.price;
                }
            }

            if (price != 0) {
                console.log(`Стоимость товара '${pushProduct}' - ${price}р за кг`);
            } else {
                console.log(`Товара ${pushProduct} нет. Пожалуйста, ознакомтесь со списком товаров.`);
            }
        }

        function check() {
            let num;
            do {
                num = prompt("Введите сумму которую вы готовы потратить:");
                if (+num == null || +num == "") {
                    alert("Вы ничего не ввели!");
                } else if (isNaN(num)) {
                    alert("Вы ввели не число!");
                } else if (parseFloat(num) <= 0) {
                    alert("Нужно ввести положительное число!");
                } else {
                    return num = parseFloat(num);
                }
            } while (num !== parseFloat(num));
        }

        function possForSale() {
            let buyBudget = check();
            let str = ``;
            let i = 0;
            for (let product of warehouse) {
                let name = product.name;
                let price = product.price;
                let count = product.count;
                let number = parseFloat((buyBudget / price).toFixed(2));
                i++;
                if (number < count) {
                    str += `(${number} кг ${name}) `;
                } else {
                    str += `(${count} кг ${name}) `;
                }
                if (i < 5) {
                    str += `или `;
                }
            }
            console.log(str);
        }

    </script>
    <script src="script.js?v=1"></script>
</body>

</html>